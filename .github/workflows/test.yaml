name: Test debian package creation

on:
  workflow_dispatch:




jobs:
  build_and_test:
    runs-on: ubuntu-latest

    steps:

    - name: Checkout the june-cheque repo
      uses: actions/checkout@v2
      with:
        path: june-cheque

    - name: create the package
      run: |
        cd june-cheque
        make pkg-debi

    - name: install the package
      run: |
        cd june-cheque
        sudo apt-get install ./*.deb

    - name: run help of the package
      run: |
        june-cheque-create -h

    - name: run simulation
      run: |
        pritnf "%s\n%s" $GITHUBACCOUNT_IDENTIFIER $GITHUBACCOUNT_KEY | june-cheque-create -a 10 -n 5 -o gha-check.txt -s
		cat gha-check.txt
      env:
        GITHUBACCOUNT_IDENTIFIER: ${{ secrets.GITHUBACCOUNT_IDENTIFIER }}
        GITHUBACCOUNT_KEY: ${{ secrets.GITHUBACCOUNT_KEY }}

